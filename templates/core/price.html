<!DOCTYPE html>
{% extends base_template %}
{% load static %}
{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockSmart-Set Price</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'assets/style.css' %}" rel="stylesheet">
</head>
<body>
<div class="navheight"></div>
<br><br>
<div class="container">
        <h2>Price Chart</h2>

        <div class="d-flex flex-wrap">
        <!-- Form to add item -->

        <div class="col-12" style="margin-bottom:1px;"><h5>Set default tax% and Offer%</h5></div>

        <form method="post" action="{% url 'price_pg' %}" class="col-12">
        {% csrf_token %}
        <div class="col-12 d-flex flex-wrap">

        <div class="form-group col-6">
        <input id="defaultTax" name="tax" type="text" class="form-control" placeholder="Tax %" required>
        </div>

        <div class="form-group col-6">
        <input id="defaultOffer" name="offer" type="text" class="form-control" placeholder="Offer %" required>
        </div>

        </div>
        <div class="col-12" style="text-align: right;"><button type="submit" class="btn btn-success px-5">Submit</button></div>
        </form>
        </div>

<br>
            <!-- Table to display saved items -->
            <div class=" col-12">
<br>

<form class="footer-bottom" id="itemForm" method="post" action="{% url 'updatePrice' %}" >
{% csrf_token %}
<table class="table table-bordered table-striped">
<thead class="">
    <tr>
        <th class="headerx  col-3">Item</th>
    <th class="headerx  col-2">Price (Rs.)</th>
    <th class="headerx  col-2">Tax (%) </th>
    <th class="headerx  col-2">Offer (%)</th>
    <th class="headerx  col-3">Selling Price (Rs.) </th>
    </tr>
</thead>
</table>
                <div class="" style="height: 50vh; overflow: auto;">
                    <table class="table table-hover price-tabel" >
                        {% for i in price_data %}
                        <tr>
                            <input name="id[]" type="hidden" class="form-control" value="{{i.id}}" readonly>
                            <td class=" col-3" style="padding-left: 25px;"><input name="itemname[]" type="text" class="form-control" value="{{i.pt_item.item_name}}" readonly></td>
                            <td class=" col-2 " style="padding-left: 25px;"><input name="sellingprice[]" type="text" class="price-tabel form-control" value="{{i.pt_sellingPrice}}"></td>
                            <td class=" col-2 " style="padding-left: 25px;"><input name="tax[]" type="text" class="price-tabel form-control" value="{{i.pt_tax}}"></td>
                            <td class=" col-2 " style="padding-left: 25px;"><input name="offer[]" type="text" class="price-tabel form-control" value="{{i.pt_offer}}"></td>
                            <td class=" col-3 " style="padding-left: 25px;"><input type="text" class=" form-control" readonly></td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
    <br>

                    <div style="text-align: right;"><button type="submit" class="btn btn-success px-5">Submit</button></div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="bottom-space"></div>
<div class="bottom-space"></div>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<!--    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>-->

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
{% if messages %}
{% for i in messages %}
{% if i.tags == 'warning' %}
            <script>
              swal('{{i}}', '', 'warning');
            </script>
        {% elif i.tags == 'error' %}
            <script>
              swal('{{i}}', '', 'error');
            </script>
        {% elif i.tags == 'info' %}
            <script>
              swal('{{i}}', '', 'info');
            </script>
        {% else %}
            <script>
              swal('{{i}}', '', 'success');
            </script>
        {% endif %}
    {% endfor %}
{% endif %}

</body>
</html>
{% endblock %}
